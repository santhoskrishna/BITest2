//HintName: RouteHandlerValidations.g.cs
// <auto-generated/>
#nullable enable
namespace System.Runtime.CompilerServices
{
    [AttributeUsage(System.AttributeTargets.Method, AllowMultiple = true)]
    file sealed class InterceptsLocationAttribute : Attribute
    {
        public InterceptsLocationAttribute(int version, string data) { }
    }
}

namespace Microsoft.AspNetCore.Http.Validations.Generated
{
    using System;
    using System.Linq;
    using System.Diagnostics;
    using System.ComponentModel.DataAnnotations;
    
    file class EndpointKey(string route, global::System.Collections.Generic.IEnumerable<string> methods)
    {
        public string Route { get; } = route;
        public global::System.Collections.Generic.IEnumerable<string> Methods { get; } = methods;
        
        public override bool Equals(object? obj)
        {
            if (obj is EndpointKey other)
            {
                return string.Equals(Route, other.Route, global::System.StringComparison.OrdinalIgnoreCase) &&
                Methods.SequenceEqual(other.Methods, global::System.StringComparer.OrdinalIgnoreCase);
            }
            return false;
        }
        
        public override int GetHashCode()
        {
            int hash = 17;
            hash = hash * 23 + (Route?.GetHashCode(global::System.StringComparison.OrdinalIgnoreCase) ?? 0);
            hash = hash * 23 + GetMethodsHashCode(Methods);
            return hash;
        }
        
        private static int GetMethodsHashCode(global::System.Collections.Generic.IEnumerable<string> methods)
        {
            if (methods == null)
            {
                return 0;
            }
            int hash = 17;
            foreach (var method in methods)
            {
                hash = hash * 23 + (method?.GetHashCode(global::System.StringComparison.OrdinalIgnoreCase) ?? 0);
            }
            return hash;
        }
    }

    file class ValidationProblemBuilder
    {
        private readonly global::Microsoft.AspNetCore.Http.HttpValidationProblemDetails _problemDetails;
        
        public ValidationProblemBuilder()
        {
            _problemDetails = new global::Microsoft.AspNetCore.Http.HttpValidationProblemDetails();
        }
        
        public ValidationProblemBuilder WithTitle(string title)
        {
            _problemDetails.Title = title;
            return this;
        }
        
        public ValidationProblemBuilder WithStatus(int? status)
        {
            _problemDetails.Status = status;
            return this;
        }
        
        public ValidationProblemBuilder WithDetail(string detail)
        {
            _problemDetails.Detail = detail;
            return this;
        }
        
        public ValidationProblemBuilder WithInstance(string instance)
        {
            _problemDetails.Instance = instance;
            return this;
        }
        
        public ValidationProblemBuilder WithType(string type)
        {
            _problemDetails.Type = type;
            return this;
        }
        
        public ValidationProblemBuilder WithExtensions(global::System.Collections.Generic.IDictionary<string, object> extensions)
        {
            foreach (var kvp in extensions)
            {
                _problemDetails.Extensions[kvp.Key] = kvp.Value;
            }
            return this;
        }
        
        public ValidationProblemBuilder WithErrors(global::System.Collections.Generic.IDictionary<string, string[]> errors)
        {
            foreach (var kvp in errors)
            {
                _problemDetails.Errors[kvp.Key] = kvp.Value;
            }
            return this;
        }
        
        public ValidationProblemBuilder WithError(string key, string error)
        {
            if (_problemDetails.Errors.ContainsKey(key))
            {
                _problemDetails.Errors[key] = _problemDetails.Errors[key].Append(error).ToArray();
            }
            else
            {
                _problemDetails.Errors[key] = new string[] { error };
            }
            return this;
        }
        
        public ValidationProblemBuilder WithErrors(string key, string[] errors)
        {
            if (_problemDetails.Errors.ContainsKey(key))
            {
                _problemDetails.Errors[key] = _problemDetails.Errors[key].Concat(errors).ToArray();
            }
            else
            {
                _problemDetails.Errors[key] = errors;
            }
            return this;
        }
        
        public global::Microsoft.AspNetCore.Http.HttpValidationProblemDetails Build()
        {
            return _problemDetails;
        }
        
        public bool HasValue()
        {
            return _problemDetails.Errors.Count > 0;
        }
    }

    file static class WithValidationsInterceptor
    {
        [global::System.Runtime.CompilerServices.InterceptsLocationAttribute(1, "AnYTrS2tGWrwalLyj4MD5SIBAABQcm9ncmFtLmNz")]
        public static global::Microsoft.AspNetCore.Builder.IEndpointConventionBuilder WithValidation(this global::Microsoft.AspNetCore.Builder.IEndpointConventionBuilder builder)
        {
            System.Diagnostics.Debugger.Break();
            builder.AddEndpointFilter(async (context, next) =>
            {
                var targetEndpoint = context.HttpContext.Features.Get<global::Microsoft.AspNetCore.Http.Features.IEndpointFeature>()?.Endpoint;
                Debug.Assert(targetEndpoint != null);
                var route = ((global::Microsoft.AspNetCore.Routing.RouteEndpoint)targetEndpoint).RoutePattern.RawText;
                var methods = ((global::Microsoft.AspNetCore.Routing.RouteEndpoint)targetEndpoint).Metadata.GetMetadata<global::Microsoft.AspNetCore.Routing.IHttpMethodMetadata>()?.HttpMethods ?? ["GET"];
                Debug.Assert(route != null);
                var validationFilter = ValidationsFilters.Filters[new EndpointKey(route, methods)];
                var validationProblemDetails = validationFilter(context);
                if (validationProblemDetails == null)
                {
                    return await next(context);
                }
                return global::Microsoft.AspNetCore.Http.TypedResults.ValidationProblem(validationProblemDetails.Errors);
            });
            return builder;
        }
    }


    file static class ValidationTypes
    {
        public static global::Microsoft.AspNetCore.Http.HttpValidationProblemDetails? Validate<T>(T value, global::System.ComponentModel.DataAnnotations.ValidationContext? validationContext = null, IServiceProvider? serviceProvider = null, int currentDepth = 0, bool skipRecurse = false) => null;
        
        private static readonly ValidationAttribute StringRequiredPropertyRequiredAttribute = new global::System.ComponentModel.DataAnnotations.RequiredAttribute();
        private static readonly ValidationAttribute StringStringWithLengthStringLengthAttribute = new global::System.ComponentModel.DataAnnotations.StringLengthAttribute(10);
        
        public static global::Microsoft.AspNetCore.Http.HttpValidationProblemDetails? Validate(SubType? value, global::System.ComponentModel.DataAnnotations.ValidationContext? validationContext = null, IServiceProvider? serviceProvider = null, int currentDepth = 0, bool skipRecurse = false)
        {
            var maxDepth = ((global::Microsoft.Extensions.Options.IOptions<global::Microsoft.AspNetCore.Http.Json.JsonOptions>)(serviceProvider ?? validationContext).GetService(typeof(global::Microsoft.Extensions.Options.IOptions<global::Microsoft.AspNetCore.Http.Json.JsonOptions>))).Value?.SerializerOptions.MaxDepth;
            if (currentDepth > (maxDepth == null || maxDepth == 0 ? 64 : maxDepth))
            {
                return null;
            }
            ValidationProblemBuilder resultBuilder = new();
            if (value != null)
            {
                validationContext ??= new(value, serviceProvider: serviceProvider, items: null);
                validationContext.DisplayName = "RequiredProperty";
                validationContext.MemberName = "RequiredProperty";
                global::System.ComponentModel.DataAnnotations.ValidationResult? validationResult;
                validationResult = StringRequiredPropertyRequiredAttribute.GetValidationResult(value?.RequiredProperty, validationContext);
                if (validationResult is global::System.ComponentModel.DataAnnotations.ValidationResult { ErrorMessage: not null })
                {
                    resultBuilder.WithError("RequiredProperty", validationResult.ErrorMessage);
                }
                validationContext.DisplayName = "StringWithLength";
                validationContext.MemberName = "StringWithLength";
                validationResult = StringStringWithLengthStringLengthAttribute.GetValidationResult(value?.StringWithLength, validationContext);
                if (validationResult is global::System.ComponentModel.DataAnnotations.ValidationResult { ErrorMessage: not null })
                {
                    resultBuilder.WithError("StringWithLength", validationResult.ErrorMessage);
                }
            }
            return resultBuilder.HasValue() ? resultBuilder.Build() : null;
        }
        private static readonly ValidationAttribute StringEmailStringEmailAddressAttribute = new global::System.ComponentModel.DataAnnotations.EmailAddressAttribute();
        
        public static global::Microsoft.AspNetCore.Http.HttpValidationProblemDetails? Validate(SubTypeWithInheritance? value, global::System.ComponentModel.DataAnnotations.ValidationContext? validationContext = null, IServiceProvider? serviceProvider = null, int currentDepth = 0, bool skipRecurse = false)
        {
            var maxDepth = ((global::Microsoft.Extensions.Options.IOptions<global::Microsoft.AspNetCore.Http.Json.JsonOptions>)(serviceProvider ?? validationContext).GetService(typeof(global::Microsoft.Extensions.Options.IOptions<global::Microsoft.AspNetCore.Http.Json.JsonOptions>))).Value?.SerializerOptions.MaxDepth;
            if (currentDepth > (maxDepth == null || maxDepth == 0 ? 64 : maxDepth))
            {
                return null;
            }
            ValidationProblemBuilder resultBuilder = new();
            if (value != null)
            {
                if (value is SubType subTypeSubType)
                {
                    var subTypeSubTypeValidationResult = ValidationTypes.Validate((SubType)subTypeSubType, validationContext, serviceProvider, currentDepth: currentDepth + 1, skipRecurse);
                    if (subTypeSubTypeValidationResult is not null)
                    {
                        foreach (var error in subTypeSubTypeValidationResult.Errors)
                        {
                            resultBuilder.WithErrors(error.Key, error.Value);
                        }
                    }
                }
                validationContext ??= new(value, serviceProvider: serviceProvider, items: null);
                validationContext.DisplayName = "EmailString";
                validationContext.MemberName = "EmailString";
                global::System.ComponentModel.DataAnnotations.ValidationResult? validationResult;
                validationResult = StringEmailStringEmailAddressAttribute.GetValidationResult(value?.EmailString, validationContext);
                if (validationResult is global::System.ComponentModel.DataAnnotations.ValidationResult { ErrorMessage: not null })
                {
                    resultBuilder.WithError("EmailString", validationResult.ErrorMessage);
                }
            }
            return resultBuilder.HasValue() ? resultBuilder.Build() : null;
        }
        private static readonly ValidationAttribute Int32IntegerWithRangeRangeAttribute = new global::System.ComponentModel.DataAnnotations.RangeAttribute(10, 100);
        private static readonly ValidationAttribute Int32IntegerWithRangeAndDisplayNameRangeAttribute = new global::System.ComponentModel.DataAnnotations.RangeAttribute(10, 100);
        private static readonly ValidationAttribute SubTypePropertyWithMemberAttributesRequiredAttribute = new global::System.ComponentModel.DataAnnotations.RequiredAttribute();
        private static readonly ValidationAttribute Int32IntegerWithCustomValidationAttributeCustomValidationAttribute = new global::CustomValidationAttribute() { ErrorMessage = "Value must be an even number" };
        private static readonly ValidationAttribute Int32PropertyWithMultipleAttributesCustomValidationAttribute = new global::CustomValidationAttribute();
        private static readonly ValidationAttribute Int32PropertyWithMultipleAttributesRangeAttribute = new global::System.ComponentModel.DataAnnotations.RangeAttribute(10, 100);
        
        public static global::Microsoft.AspNetCore.Http.HttpValidationProblemDetails? Validate(ComplexType? value, global::System.ComponentModel.DataAnnotations.ValidationContext? validationContext = null, IServiceProvider? serviceProvider = null, int currentDepth = 0, bool skipRecurse = false)
        {
            var maxDepth = ((global::Microsoft.Extensions.Options.IOptions<global::Microsoft.AspNetCore.Http.Json.JsonOptions>)(serviceProvider ?? validationContext).GetService(typeof(global::Microsoft.Extensions.Options.IOptions<global::Microsoft.AspNetCore.Http.Json.JsonOptions>))).Value?.SerializerOptions.MaxDepth;
            if (currentDepth > (maxDepth == null || maxDepth == 0 ? 64 : maxDepth))
            {
                return null;
            }
            ValidationProblemBuilder resultBuilder = new();
            if (value != null)
            {
                validationContext ??= new(value, serviceProvider: serviceProvider, items: null);
                validationContext.DisplayName = "IntegerWithRange";
                validationContext.MemberName = "IntegerWithRange";
                global::System.ComponentModel.DataAnnotations.ValidationResult? validationResult;
                validationResult = Int32IntegerWithRangeRangeAttribute.GetValidationResult(value?.IntegerWithRange, validationContext);
                if (validationResult is global::System.ComponentModel.DataAnnotations.ValidationResult { ErrorMessage: not null })
                {
                    resultBuilder.WithError("IntegerWithRange", validationResult.ErrorMessage);
                }
                validationContext.DisplayName = "Valid identifier";
                validationContext.MemberName = "IntegerWithRangeAndDisplayName";
                validationResult = Int32IntegerWithRangeAndDisplayNameRangeAttribute.GetValidationResult(value?.IntegerWithRangeAndDisplayName, validationContext);
                if (validationResult is global::System.ComponentModel.DataAnnotations.ValidationResult { ErrorMessage: not null })
                {
                    resultBuilder.WithError("IntegerWithRangeAndDisplayName", validationResult.ErrorMessage);
                }
                validationContext.DisplayName = "PropertyWithMemberAttributes";
                validationContext.MemberName = "PropertyWithMemberAttributes";
                var typePropertyWithMemberAttributesValidationResult = ValidationTypes.Validate(value?.PropertyWithMemberAttributes, validationContext, serviceProvider, currentDepth: currentDepth + 1, skipRecurse);
                if (typePropertyWithMemberAttributesValidationResult is not null)
                {
                    foreach (var error in typePropertyWithMemberAttributesValidationResult.Errors)
                    {
                        resultBuilder.WithErrors($"PropertyWithMemberAttributes.{error.Key}", error.Value);
                    }
                }
                validationResult = SubTypePropertyWithMemberAttributesRequiredAttribute.GetValidationResult(value?.PropertyWithMemberAttributes, validationContext);
                if (validationResult is global::System.ComponentModel.DataAnnotations.ValidationResult { ErrorMessage: not null })
                {
                    resultBuilder.WithError("PropertyWithMemberAttributes", validationResult.ErrorMessage);
                }
                validationContext.DisplayName = "PropertyWithoutMemberAttributes";
                validationContext.MemberName = "PropertyWithoutMemberAttributes";
                var typePropertyWithoutMemberAttributesValidationResult = ValidationTypes.Validate(value?.PropertyWithoutMemberAttributes, validationContext, serviceProvider, currentDepth: currentDepth + 1, skipRecurse);
                if (typePropertyWithoutMemberAttributesValidationResult is not null)
                {
                    foreach (var error in typePropertyWithoutMemberAttributesValidationResult.Errors)
                    {
                        resultBuilder.WithErrors($"PropertyWithoutMemberAttributes.{error.Key}", error.Value);
                    }
                }
                validationContext.DisplayName = "PropertyWithInheritance";
                validationContext.MemberName = "PropertyWithInheritance";
                var typePropertyWithInheritanceValidationResult = ValidationTypes.Validate(value?.PropertyWithInheritance, validationContext, serviceProvider, currentDepth: currentDepth + 1, skipRecurse);
                if (typePropertyWithInheritanceValidationResult is not null)
                {
                    foreach (var error in typePropertyWithInheritanceValidationResult.Errors)
                    {
                        resultBuilder.WithErrors($"PropertyWithInheritance.{error.Key}", error.Value);
                    }
                }
                validationContext.DisplayName = "ListOfSubTypes";
                validationContext.MemberName = "ListOfSubTypes";
                var ListOfSubTypesIndex = 0;
                foreach (var item in value?.ListOfSubTypes ?? [])
                {
                    var itemValidationResult = ValidationTypes.Validate(item, validationContext, serviceProvider, currentDepth, skipRecurse);
                    if (itemValidationResult is not null)
                    {
                        foreach (var error in itemValidationResult.Errors)
                        {
                            resultBuilder.WithErrors($"ListOfSubTypes[{ ListOfSubTypesIndex }].{error.Key}", error.Value);
                        }
                        ListOfSubTypesIndex++;
                    }
                }
                validationContext.DisplayName = "IntegerWithCustomValidationAttribute";
                validationContext.MemberName = "IntegerWithCustomValidationAttribute";
                validationResult = Int32IntegerWithCustomValidationAttributeCustomValidationAttribute.GetValidationResult(value?.IntegerWithCustomValidationAttribute, validationContext);
                if (validationResult is global::System.ComponentModel.DataAnnotations.ValidationResult { ErrorMessage: not null })
                {
                    resultBuilder.WithError("IntegerWithCustomValidationAttribute", validationResult.ErrorMessage);
                }
                validationContext.DisplayName = "PropertyWithMultipleAttributes";
                validationContext.MemberName = "PropertyWithMultipleAttributes";
                validationResult = Int32PropertyWithMultipleAttributesCustomValidationAttribute.GetValidationResult(value?.PropertyWithMultipleAttributes, validationContext);
                if (validationResult is global::System.ComponentModel.DataAnnotations.ValidationResult { ErrorMessage: not null })
                {
                    resultBuilder.WithError("PropertyWithMultipleAttributes", validationResult.ErrorMessage);
                }
                validationResult = Int32PropertyWithMultipleAttributesRangeAttribute.GetValidationResult(value?.PropertyWithMultipleAttributes, validationContext);
                if (validationResult is global::System.ComponentModel.DataAnnotations.ValidationResult { ErrorMessage: not null })
                {
                    resultBuilder.WithError("PropertyWithMultipleAttributes", validationResult.ErrorMessage);
                }
            }
            return resultBuilder.HasValue() ? resultBuilder.Build() : null;
        }
    }


    file static class ValidationsFilters
    {
        public static readonly global::System.Collections.Generic.Dictionary<EndpointKey, global::System.Func<global::Microsoft.AspNetCore.Http.EndpointFilterInvocationContext, global::Microsoft.AspNetCore.Http.HttpValidationProblemDetails?>> Filters = new()
        {
            { new EndpointKey("/complex-type", ["POST"]), context => 
                {
                    ValidationProblemBuilder resultBuilder = new();
                    var value0 = context.GetArgument<ComplexType>(0);
                    var typeValidationResult = ValidationTypes.Validate(value0, serviceProvider: context.HttpContext.RequestServices);
                    if (typeValidationResult is not null)
                    {
                        foreach (var error in typeValidationResult.Errors)
                        {
                            resultBuilder.WithErrors(error.Key, error.Value);
                        }
                    }
                    return resultBuilder.HasValue() ? resultBuilder.Build() : null;
                }
            },

        };
    }
}
#nullable restore
